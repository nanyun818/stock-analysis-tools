# 券商配置获取详细教程

## 目录
1. [华泰证券配置获取](#华泰证券配置获取)
2. [佣金宝配置获取](#佣金宝配置获取)
3. [银河证券配置获取](#银河证券配置获取)
4. [雪球模拟盘配置获取](#雪球模拟盘配置获取)
5. [配置文件使用方法](#配置文件使用方法)
6. [常见问题解决](#常见问题解决)

---

## 华泰证券配置获取

### 所需信息
- 账号（手机号或客户号）
- 登录密码（明文）
- 通讯密码（明文）
- **加密交易密码（重要）**
- 资金账号

### 获取加密交易密码步骤

#### 方法一：浏览器开发者工具（推荐）

1. **打开华泰证券官网**
   - 访问：https://www.htsc.com.cn
   - 点击"网上营业厅"或"登录"

2. **打开开发者工具**
   - 按 `F12` 键
   - 或右键点击页面 → 选择"检查"或"审查元素"

3. **准备抓包**
   - 切换到 `Network`（网络）标签页
   - 勾选 `Preserve log`（保留日志）
   - 清空现有记录（点击清除按钮）

4. **执行登录操作**
   - 输入账号和密码
   - **不要**直接点击登录
   - 先在开发者工具中准备好
   - 然后点击登录按钮

5. **查找登录请求**
   - 在Network标签页中找到登录相关的POST请求
   - 通常名称包含：`login`、`auth`、`signin`等
   - 点击该请求查看详情

6. **提取加密密码**
   - 在请求详情中找到 `Request Payload` 或 `Form Data`
   - 查找 `trdpwd` 字段
   - 复制该字段的值（这就是加密后的交易密码）

#### 方法二：使用配置助手工具

1. **运行配置助手**
   ```bash
   python config_helper.py
   ```

2. **选择华泰证券标签页**

3. **填写基本信息**
   - 账号、登录密码、通讯密码、资金账号

4. **点击"获取密码帮助"**
   - 按照弹出的详细说明操作

### 配置文件格式
```json
{
    "user": "你的账号",
    "password": "登录密码",
    "comm_password": "通讯密码",
    "trdpwd": "加密后的交易密码",
    "account": "资金账号"
}
```

### 注意事项
- 加密交易密码有时效性，通常24小时内有效
- 如果交易失败，可能需要重新获取加密密码
- 建议使用无痕模式避免缓存干扰

---

## 佣金宝配置获取

### 所需信息
- 账号（手机号）
- **加密登录密码（重要）**
- 资金账号

### 获取加密登录密码步骤

1. **打开佣金宝官网**
   - 访问：https://www.yjb.com
   - 点击"登录"

2. **开启开发者工具**
   - 按 `F12` 键
   - 切换到 `Network` 标签页
   - 勾选 `Preserve log`

3. **执行登录**
   - 输入手机号和密码
   - 点击登录按钮

4. **查找登录请求**
   - 找到登录的POST请求
   - 通常URL包含：`login`、`auth`等

5. **提取加密密码**
   - 在请求参数中找到 `password` 字段
   - 复制该值（已加密的密码）

### 配置文件格式
```json
{
    "user": "手机号",
    "password": "加密后的密码",
    "account": "资金账号"
}
```

---

## 银河证券配置获取

### 所需信息
- 账号
- 登录密码（明文即可）
- 资金账号

### 特殊要求
银河证券需要验证码识别，需要安装额外工具：

```bash
# 安装验证码识别工具
pip install ddddocr
# 或者
pip install pytesseract
```

### 配置文件格式
```json
{
    "user": "账号",
    "password": "登录密码",
    "account": "资金账号"
}
```

### 验证码工具安装

#### 方法一：使用ddddocr（推荐）
```bash
pip install ddddocr
```

#### 方法二：使用tesseract
1. 下载tesseract：https://github.com/UB-Mannheim/tesseract/wiki
2. 安装到系统
3. 添加到环境变量PATH
4. 安装Python包：
   ```bash
   pip install pytesseract
   ```

---

## 雪球模拟盘配置获取

### 所需信息
- 雪球用户名
- 雪球密码
- 组合代码
- 市场代码（固定为"cn"）

### 获取组合代码步骤

1. **登录雪球网站**
   - 访问：https://xueqiu.com
   - 登录你的账号

2. **进入模拟交易**
   - 点击"交易" → "模拟交易"
   - 或直接访问：https://xueqiu.com/sim

3. **创建投资组合**
   - 点击"创建组合"
   - 填写组合名称和描述
   - 设置初始资金
   - 创建组合

4. **获取组合代码**
   - 进入创建的组合页面
   - 查看浏览器地址栏
   - URL格式：`https://xueqiu.com/P/ZH123456`
   - 组合代码就是：`ZH123456`

### 配置文件格式
```json
{
    "username": "雪球用户名",
    "password": "雪球密码",
    "portfolio_code": "ZH123456",
    "portfolio_market": "cn"
}
```

---

## 配置文件使用方法

### 1. 手动创建配置文件

在项目目录下创建对应的JSON文件：
- `ht.json` - 华泰证券
- `yjb.json` - 佣金宝
- `yh.json` - 银河证券
- `xq.json` - 雪球模拟

### 2. 使用配置助手工具

```bash
# 启动配置助手
python config_helper.py
# 或双击
启动配置助手.bat
```

### 3. 在交易程序中使用

```python
import easytrader

# 华泰证券
ht_trader = easytrader.use('ht')
ht_trader.prepare('ht.json')

# 佣金宝
yjb_trader = easytrader.use('yjb')
yjb_trader.prepare('yjb.json')

# 银河证券
yh_trader = easytrader.use('yh')
yh_trader.prepare('yh.json')

# 雪球模拟
xq_trader = easytrader.use('xq')
xq_trader.prepare('xq.json')
```

---

## 常见问题解决

### Q1: 获取不到加密密码怎么办？

**A1:** 
- 确保使用无痕模式浏览器
- 清除浏览器缓存和Cookie
- 尝试不同的浏览器（Chrome、Firefox、Edge）
- 检查是否有广告拦截插件干扰

### Q2: 加密密码失效怎么办？

**A2:**
- 华泰和佣金宝的加密密码有时效性
- 通常24小时内有效
- 失效后需要重新获取
- 建议每天重新获取一次

### Q3: 验证码识别失败怎么办？

**A3:**
- 确保安装了验证码识别工具
- 尝试安装不同的识别工具：
  ```bash
  pip install ddddocr
  pip install pytesseract
  ```
- 检查网络连接是否稳定

### Q4: 连接测试失败怎么办？

**A4:**
- 检查配置文件格式是否正确
- 确认账号密码是否正确
- 检查网络连接
- 确认券商服务器是否正常

### Q5: 雪球组合代码找不到怎么办？

**A5:**
- 确保已经创建了模拟投资组合
- 检查组合是否为"公开"状态
- 尝试重新创建组合
- 确认URL中的组合代码格式

### Q6: 交易时提示权限不足怎么办？

**A6:**
- 确认账户已开通相应权限
- 检查资金账号是否正确
- 确认交易时间是否在开市时间内
- 联系券商客服确认账户状态

---

## 安全提醒

⚠️ **重要安全提示**

1. **配置文件安全**
   - 配置文件包含敏感信息，请妥善保管
   - 不要将配置文件上传到公共代码仓库
   - 建议定期更改密码

2. **网络安全**
   - 使用安全的网络环境
   - 避免在公共WiFi下操作
   - 定期检查账户异常登录

3. **软件安全**
   - 从官方渠道下载软件
   - 定期更新软件版本
   - 使用正版杀毒软件

4. **投资风险**
   - 程序化交易存在风险
   - 建议先使用模拟盘测试
   - 设置合理的止损止盈
   - 不要投入超过承受能力的资金

---

## 技术支持

如果遇到技术问题，可以：

1. 查看程序日志文件
2. 使用配置助手的系统检查功能
3. 参考easytrader官方文档
4. 在相关技术论坛寻求帮助

**免责声明：本工具仅供学习和研究使用，使用者需自行承担投资风险。**